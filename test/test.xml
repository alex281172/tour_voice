<test>

    <test-case id="1">
        <q>/start</q>
        <!-- На старте машина представляется ботом туристической компании Just Tour-->
        <a>Здравствуйте, я Мария, бот туристической компании Just Tour.</a>
        <a>Как я могу к Вам обращаться?</a>
        <q>Антон</q>
        <a>Антон, приятно познакомиться!</a>
        <!--... и рассказывает о проблемах, в решении которых она может помочь-->
        <a>Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <!--...после этого бот побуждате пользователя продолжить диалог-->
        <a>Что Вас интересует?</a>
        <q>Оформи заявку на тур</q>
        <!--Если пользователь хочет оформить заявку... бот спрашивает, в какой город/страну пользователю хочется отправиться-->
        <a>В какой город или страну хотите поехать?</a>
        <q>Испания</q>
        <a>Записала, Испания</a>
        <a>Для оформления заявки я задам вам несколько вопросов. Обязательными будут только Ваше имя и телефон</a>
        <!--Для заполнения заявки бот выясняет у пользователя - имя пользователя -->
        <a>Ваше имя Антон, верно?</a>
        <q>Да</q>
        <a>Внесла в заявку</a>
        <a>Назовите номер Вашего телефона</a>
        <q>8-900-000-0000</q>
        <a>8-900-000-0000 внесла в заявку</a>
        <!--Для заполнения заявки бот выясняет у пользователя - дату начала поездки-->
        <a>Назовите дату начала поездки. Можно примерно</a>
    </test-case>
    
    <test-case id="2">
        <context var="client">
            {
                "name": "Антон"
            }
        </context>
        <q>/start</q>
        <!--Если пользователь уже общался с ботом и представлялся, на старте машина обращается по имени-->
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Оформи заявку на тур</q>
        <a>В какой город или страну хотите поехать?</a>
        <!--Если пользователь не определился со страной, бот начинает заполнение заявки, объявив, что с подбором поможет менеджер-->
        <q>Не знаю</q>
        <a>Не проблема. Заполним заявку, а менеджер поможет Вам выбрать направление</a>
        <a>Для оформления заявки я задам вам несколько вопросов. Обязательными будут только Ваше имя и телефон</a>
        <a>Ваше имя Антон, верно?</a>
        <q>Да</q>
        <a>Внесла в заявку</a>
        <!--Для заполнения заявки бот выясняет у пользователя - номер телефона -->
        <a>Назовите номер Вашего телефона</a>
        <!--Заявка не отправляется без телефона пользователя-->
        <q>Не хочу</q>
        <a>К сожалению, без номера телефона я не могу принять заявку</a>
        <a>Буду на связи. Обращайтесь, если понадоблюсь!</a>
    </test-case>
    
    <test-case id="3">
    <!-- Если пользователь из любой точки диалога задает вопрос, цель которого узнать погоду...-->
        <!--Запрос погоды из стейта /Name -->
        <q>/start</q>
        <a>Здравствуйте, я Мария, бот туристической компании Just Tour.</a>
        <a>Как я могу к Вам обращаться?</a>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--Запрос погоды из стейта /Menu -->
        <state>/Menu/Choose</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a> 
        <!--Запрос погоды из стейта /Wheather -->
        <state>/Weather/Step5</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--Запрос погоды из стейта /Trip -->
        <state>/Trip/Step2</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
    </test-case>
    
    <test-case id="4" integration="true">
        <context var="session">
            {
                "date": {"year": "2023", "month": "1", "day": "1", "timestamp": 1672531200000}
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <context var="client">
            {
                "name": "Антон"
            }
        </context>
        <state>/Menu/Begin</state>              
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        
        <a> Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Погода</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <q>Москва</q>
        <a>На какую дату смотрим прогноз погоды?</a>
        <q>01/11/2022</q>
        <a>Эта дата в прошлом. Узнать, какая была погода 1 ноября прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 1 ноября была: 4 градуса. Ветер 2, с порывами 4 метра в секунду.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <random>0, 1</random>
        <q>Да</q>
        <a>Давайте оформим заявку на тур в Москву?</a>  
        <q>Да</q>
        <a>Чтобы оформить заявку, мне понадобятся ваши имя и номер телефона</a>
        <a>Ваше имя Антон, верно?</a>
        <q>Да</q>
        <a>Внесла в заявку</a>
        <a>Назовите номер Вашего телефона</a>
        <q>89603332211</q>
        <a>89603332211 внесла в заявку</a>
        <a>Назовите дату начала поездки. Можно примерно</a>
        <q>12/12/2022</q>
        <a>Выберите длительность поездки</a>
        <q>до 7 дней</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество людей в поездке-->
        <a>Сколько всего человек будет в поездке включая детей?</a>
        <q>пять</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество детей в поездке-->
        <a>Сколько из них детей младше 14 лет?</a>
        <q>нисколько</q>
        <!--Для заполнения заявки бот выясняет у пользователя - бюджет поездки-->
        <a>Какой примерно бюджет поездки из расчета на одного взрослого?</a>
        <q>50 тыс.руб.</q>
        <!--Для заполнения заявки бот выясняет у пользователя - желаемую звездность отеля-->
        <a>Какой хотите минимальный уровень звездности отеля?</a>
        <q>три звезды</q>
        <!--Для заполнения заявки бот выясняет у пользователя - комментарий для менеджера в свободной форме-->
        <a>Что-то еще передать менеджеру? Может, какие-то пожелания?</a>

    
    </test-case>
        
    <test-case id="5" integration="true">
        <context var="session"> 
            {
                "place": {"type": "city", "name": "Анкара"},
                "coordinates": {"lat": "39.91987", "lon": "32.85427"},
                "date": {"year": "2023", "month": "7", "day": "2", "timestamp": 1688256000000},
                "tripStep": "/Trip/Step4"
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <!--...бот проверяет, что в предыдущем диалоге присутствуют указания на город (Анкара), дату (2 июля)-->
        <a>Прогноз у меня только на 16 дней. Узнать, какая была погода 2 июля прошлого года?</a>
        <q>Да</q>
        <a>Погода в Анкаре в прошлом году на 2 июля была: 29 градусов. Ветер 2, с порывами 7 метров в секунду.</a>
        <!--Если температура воздуха высокая, задается вопрос, действительно ли ... поездку с жарким климатом-->
        <a>Вы действительно планируете поездку в страну с жарким климатом?</a>
        <q>Да</q>
        <!--Если пользователь отвечает утвердительно, бот предлагает продолжить оформление уже начатой заявки-->
        <a>Продолжим оформление заявки на тур?</a>
        <q>Да</q>
        <!--При продолжении с начатой заявкой названные пользователем параметры заявки спрашивать не надо-->
        <!--Для заполнения заявки бот выясняет у пользователя - длительность поездки-->
        <a>Выберите длительность поездки</a>
        <q>до 7 дней</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество людей в поездке-->
        <a>Сколько всего человек будет в поездке включая детей?</a>
        <q>пять</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество детей в поездке-->
        <a>Сколько из них детей младше 14 лет?</a>
        <q>нисколько</q>
        <!--Для заполнения заявки бот выясняет у пользователя - бюджет поездки-->
        <a>Какой примерно бюджет поездки из расчета на одного взрослого?</a>
        <q>50 тыс.руб.</q>
        <!--Для заполнения заявки бот выясняет у пользователя - желаемую звездность отеля-->
        <a>Какой хотите минимальный уровень звездности отеля?</a>
        <q>три звезды</q>
        <!--Для заполнения заявки бот выясняет у пользователя - комментарий для менеджера в свободной форме-->
        <a>Что-то еще передать менеджеру? Может, какие-то пожелания?</a>
        
    </test-case>


    <test-case id="6" integration="true">
        <context var="session"> 
            {
                "place": {"type": "city", "name": "Москва"},
                "coordinates": {"lat": "55.75222", "lon": "37.61556"}
            }
        </context>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <!--...бот проверяет, что в предыдущем диалоге присутствуют указания на город (Москва)-->
        <a>На какую дату смотрим прогноз погоды?</a>
        <q>9 мая</q>
        <a>Прогноз у меня только на 16 дней. Узнать, какая была погода 9 мая прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 9 мая была: 7 градусов. Ветер 5, с порывами 12 метров в секунду.</a>
        <!--Если температура воздуха средняя, задается вопрос, действительно ли ... поездку с умеренным климатом-->
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь в запросе изменяет параметры прогноза (например, "а в сочи?") выводится погода для новых данных-->
        <q>а в сочи?</q>
        <a>Сочи? Сейчас узнаю какая там погода.</a>
        <a>Прогноз у меня только на 16 дней. Узнать, какая была погода 9 мая прошлого года?</a>
        <q>Да</q>
        <!--После получения всех параметров бот отправляет данные в третью систему и выдает пользователю прогноз погоды-->
        <a>Погода в Сочи в прошлом году на 9 мая была: 13 градусов. Ветер 4, с порывами 16 метров в секунду.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь в запросе изменяет параметры прогноза (например, "а 1 января?") выводится погода для новых данных-->
        <q>а 1 января?</q>
        <a>Прогноз у меня только на 16 дней. Узнать, какая была погода 1 января прошлого года?</a>
        <q>Да</q>
        <a>Погода в Сочи в прошлом году на 1 января была: 10 градусов. Ветер 5, с порывами 8 метров в секунду.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь отвечает отрицательно, бот предлагает узнать погоду в другой стране или городе-->
        <q>Нет</q>
        <a>Давайте посмотрим климат в другом месте?</a>
    </test-case>
    
    <test-case id="7" integration="true">
        <context var="client">
            {
                "name": "Антон"
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <!--Если пользователь из любой точки диалога задает вопрос, цель которого узнать погоду...-->
        <!--...бот проверяет, что в запросе есть указания на город/страну-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Прогноз погоды в Токио</q>
        <a>На какую дату смотрим прогноз погоды?</a>
        <!--...бот проверяет, что в запросе есть указания на дату-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Погода на завтра</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--...бот проверяет, что в запросе есть указания на город/страну и дату-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я рассказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Прогноз погоды на 1 января в москве</q>
        <a>Прогноз у меня только на 16 дней. Узнать, какая была погода 1 января прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 1 января была: 0 градусов. Ветер 4, с порывами 6 метров в секунду.</a>
        <a>Вы действительно планируете поездку в страну с холодным климатом?</a>
    </test-case>
        
</test> 